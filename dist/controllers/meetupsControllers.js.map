{"version":3,"sources":["../../server/controllers/meetupsControllers.js"],"names":["meetups","createMeetup","req","res","data","body","dateHappening","Date","happeningOn","topic","location","tags","status","json","error","createdMeetup","meetupModel","create","findAll","allMeetups","meetupsModels","getAll","length","map","meetup","meetupId","findOne","params","theMeetup","getOne","allUpcomings","upcomingMeetups","upcomings","upcomingMeetup","title","rsvps","confirmUser","usersModels","findUser","user","userId","confirmMeetup","confirmParams","confirmStatus","rsvp"],"mappings":"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","file":"meetupsControllers.js","sourcesContent":["import meetupsModels from '../models/meetupsModels';\nimport validation from '../validations/validate';\nimport usersModels from '../models/usersModels';\n\nconst meetups = {\n  createMeetup(req, res) {\n    // all paraters are required\n    const data = req.body;\n    const dateHappening = (new Date(data.happeningOn) > new Date());\n    if (!data.topic || !data.location || !data.tags\n            || !data.happeningOn || !dateHappening) {\n      return res.status(422).json({\n        status: 422,\n        error: 'All fields are required',\n      });\n    }\n    const createdMeetup = meetupModel.create(data);\n    return res.status(201).json({\n      status: 201,\n      data: [createdMeetup]\n    });\n  },\n\n  findAll(req, res) {\n    const allMeetups = meetupsModels.getAll();\n    if (!allMeetups.length) {\n      return res.status(404).json({\n        status: 404,\n        error: 'Meetups not found',\n      });\n    }\n    return res.status(200).json({\n      status: 200,\n      data: allMeetups.map(meetup => ({\n        meetup: meetup.meetupId,\n        topic: meetup.topic,\n        location: meetup.location,\n        happeningOn: meetup.happeningOn,\n        tags: meetup.tags,\n      })),\n    });\n  },\n\n  findOne(req, res) {\n    const params = req.params.meetupId;\n    const theMeetup = meetupsModels.getOne(params);\n    if (theMeetup.length == 0) {\n      return res.status(404).json({\n        status: 404,\n        error: 'Meetup Not Found',\n      });\n    }\n    return res.status(200).json({\n      status: 200,\n      data: [theMeetup]\n    });\n  },\n\n  allUpcomings(req, res) {\n    const upcomingMeetups = meetupModel.upcomings();\n    if (upcomingMeetups.length) {\n    return res.status(404).json({\n      status: 404,\n      error: 'No meetups found',\n    });\n      \n    }\n\treturn res.status(200).json({\n        status: 200,\n        data: upcomingMeetups.map(upcomingMeetup => ({\n          meetupId: upcomingMeetup.meetupId,\n          title: upcomingMeetup.topic,\n          location: upcomingMeetup.location,\n          happeningOn: upcomingMeetup.happeningOn,\n          tags: upcomingMeetup.tags,\n        })),\n      });\n  },\n\n  rsvps(req, res) {\n    const data = req.body;\n    const confirmUser = usersModels.findUser(user=>user.userId === data.user);\n    const confirmMeetup = meetupsModels.getOne(data.meetup);\n    const confirmParams = (req.body.meetupId === req.params.meetupId);\n    const confirmStatus = (data.status === 'yes' || 'no' || 'maybe');\n    if(confirmMeetup && confirmParams) {\n      if(confirmStatus){\n        usersModels.rsvp(data);\n        return res.status(200).json({\n          status: 200,\n          data: [confirmUser],\n        });\n      }\n    \t\treturn res.status(404).json({\n    \t\tstatus: 404,\n    \t\terror: 'Ensure information provided are valid, Not found',\n        });\n    }\n    return res.status(422).json({\n      status: 422,\n      error: 'Ensure information provided are valid',\n    });\n  },\n\n};\n\nexport default meetups;\n"]}